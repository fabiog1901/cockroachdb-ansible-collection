# OpenSSL node configuration file
[ req ]
prompt=no
distinguished_name = distinguished_name
req_extensions = extensions

[ distinguished_name ]
organizationName = {{ _certificates.organization_name }}
commonName = {{ _certificates.node_common_name }}

[ extensions ]
subjectAltName = critical,DNS:localhost, DNS:"{{ hostvars[item].private_hostname }}", DNS:"{{ hostvars[item].private_hostname.split('.')[0] }}", DNS:"{{ hostvars[item].private_hostname.split('.')[1:] | join('.') }}", DNS:"{{ hostvars[item].public_hostname }}", DNS:"{{ hostvars[item].public_hostname.split('.')[0] }}", DNS:"{{ hostvars[item].public_hostname.split('.')[1:] | join('.') }}", IP:"{{ hostvars[item].private_ip }}", IP:"{{ hostvars[item].public_ip }}", IP:127.0.0.1
